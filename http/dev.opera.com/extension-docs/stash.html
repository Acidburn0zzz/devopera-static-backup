<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>opr.stash - Opera 15+ extensions documentation</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
		<link href="http://netdna.bootstrapcdn.com/bootswatch/2.3.2/cosmo/bootstrap.min.css" rel="stylesheet">
		<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.1.1/css/bootstrap-responsive.min.css" rel="stylesheet">
		<link href="css/custom.css" rel="stylesheet" media="screen">
	</head>
	<body>
		<div id="wrap">
			<nav id="navbar" class="navbar navbar-fixed-top">
				<div class="navbar-inner">
					<div class="container-fluid">
						<button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</button>
						<a class="brand" href="index.html">Opera 15+ extensions documentation</a>
						<div class="nav-collapse collapse">
							<ul class="nav">
								<li><a href="contact.html">Contact</a></li>
								<li><a href="../index.html">&uarr; Dev.Opera</a></li>
							</ul>
							<form class="navbar-search pull-right" action="http://dev.opera.com/extension-docs/search.html">
							  <input name="q" type="text" class="search-query span3" placeholder="Search extension docs">
							</form>
						</div><!-- /.nav-collapse -->
					</div><!-- /.container-fluid -->
				</div><!-- /.navbar-inner -->
			</nav>
			<div class="container-fluid">
				<div class="row-fluid">
					<div class="span8">

						<h1>opr.stash</h1>
					 
						<p class="badge badge-info pull-right">Support: Opera 19+</p>
					
					
					
    <p class="alert"><strong>Warning:</strong> this API is still experimental and is likely to change in future releases.</p>


<div id="gc-pagecontent">
	<div id="toc">
		<h2>
			Contents
		</h2>
		<ol>
			<li>
				<a href="stash.html#types">Types</a>
				<ol>
					<li>
						<a href="stash.html#type-StashItem">StashItem</a>
					</li>
				</ol>
			</li>
			<li>
				<a href="stash.html#methods">Methods</a>
				<ol>
					<li>
						<a href="stash.html#method-get">get</a>
					</li>
					<li>
						<a href="stash.html#method-query">query</a>
					</li>
					<li>
						<a href="stash.html#method-remove">remove</a>
					</li>
				</ol>
			</li>
			<li>
				<a href="stash.html#events">Events</a>
				<ol>
					<li>
						<a href="stash.html#event-onCreated">onCreated</a>
					</li>
					<li>
						<a href="stash.html#event-onRemoved">onRemoved</a>
					</li>
				</ol>
			</li>
		</ol>
	</div>
	<table class="intro">
		<tbody>
			<tr>
				<th scope="col">
					<br>
				</th>
				<th scope="col">
					<br>
				</th>
			</tr>
			<tr>
				<td>
					<strong>Description:</strong>
				</td>
				<td>
					Use the <code>opr.stash</code> module to read items stored in a user's Stash.
				</td>
			</tr>
			<tr>
				<td>
					<strong>Permissions:</strong>
				</td>
				<td>
					<code>"stash"</code>
				</td>
			</tr>
		</tbody>
	</table>
	<div class="api_reference">
		<h2 id="types">
			Types
		</h2>
		<div>
			<h3 id="type-StashItem">
				StashItem
			</h3>
			<div>
				<dl>
					<dt>
						<code class="type_name">( object )</code>
					</dt>
					<dd>
						<h4 id="StashItem-properties">
							Properties of <a href="stash.html#type-StashItem">StashItem</a>
						</h4>
					</dd>
					<dd>
						<dl>
							<dd>
								<div>
									<a name="property-StashItem-id" id="property-StashItem-id"></a>
									<dl>
										<dt>
											<code class="variable">id</code> <code class="property">( integer )</code>
										</dt>
										<dd>
											A unique identifier for the item. IDs are unique within the current profile, and they remain valid even after the browser is restarted.
											<div class="note">
												Note: Stash item ids are internal identifiers and are NOT synchronized. As urls are guaranteed to be unique in Stash, it is encouraged to use them as identifiers in extensions.
											</div>
										</dd>
									</dl>
								</div>
								<div>
									<a name="property-StashItem-url" id="property-StashItem-url"></a>
									<dl>
										<dt>
											<code class="variable">url</code> <code class="property">( string )</code>
										</dt>
										<dd>
											The URL navigated to when a user clicks the Stash item.
											<div class="note">
												Note: the thumbnail image associated with this Stash item URL can be retrieved via
												<div class="summary">
													<code><span class="subdued">opera://stash-snapshot/?</span><span class="subdued">url=</span>{url}</code>
												</div>
												<p>
													The URL has to be UTF-8 encoded, i.e. usage is <code>opera://stash-snapshot/?url= + encodeURIComponent(url)</code>
												</p>
											</div>
										</dd>
									</dl>
								</div>
								<div>
									<a name="property-StashItem-dateAdded" id="property-StashItem-dateAdded"></a>
									<dl>
										<dt>
											<code class="variable">dateAdded</code> <code class="property">( double )</code>
										</dt>
										<dd>
											When this item was created, in milliseconds since the epoch (<code>new Date(dateAdded)</code>).
										</dd>
									</dl>
								</div>
							</dd>
						</dl>
					</dd>
				</dl>
			</div>
		</div>
		<h2 id="methods">
			Methods
		</h2>
		<div>
			<h4 id="method-get">
				get
			</h4>
			<div class="summary lower">
				<code><code><span class="subdued">opr.stash.</span>get(integer <code class="variable">stashId</code>, <span>function <code class="variable">callback</code></span>)</code></code>
			</div>
			<div class="description">
				<p>
					Retrieves details about the specified Stash item.
				</p>
				<h4>
					Parameters
				</h4>
				<dl>
					<dd>
						<div>
							<a name="property-get-stashId" id="property-get-stashId"></a>
							<dl>
								<dt>
									<code class="variable">stashId</code> <code class="property">( integer )</code>
								</dt>
							</dl>
						</div>
						<div>
							<a name="property-get-callback" id="property-get-callback"></a>
							<dl>
								<dt>
									<code class="variable">callback</code> <code class="property">( function )</code>
								</dt>
							</dl>
						</div>
					</dd>
				</dl>
				<h4>
					Callback
				</h4>
				<p>
					The <em>callback</em> parameter should specify a function that looks like this:
				</p>
				<pre class="prettyprint">
<code>function(<a href="stash.html#type-StashItem">StashItem</a> item) <span class="subdued">{...}</span>;</code>
</pre>
				<dl>
					<dd>
						<div>
							<a name="property-callback-result" id="property-callback-result"></a>
							<dl>
								<dt>
									<code class="variable">item</code> <code class="property">( <a href="stash.html#type-StashItem">StashItem</a> )</code>
								</dt>
							</dl>
						</div>
					</dd>
				</dl>
			</div>
		</div>
		<div>
			<h4 id="method-query">
				query
			</h4>
			<div class="summary lower">
				<code><span class="subdued">opr.stash.</span>query(object <code class="variable">queryInfo</code>, <span>function <code class="variable">callback</code></span>)</code>
			</div>
			<div class="description">
				<p>
					Gets all Stash items that have the specified properties, or all Stash items if no properties are specified.
				</p>
				<h4>
					Parameters
				</h4>
				<dl>
					<dd>
						<div>
							<a name="property-update-updateProperties"></a>
							<dl>
								<dt>
									<code class="variable">queryInfo</code> <code class="property">( object )</code>
								</dt>
								<dd>
									<dl>
										<dd>
											<div>
												<a name="property-queryInfo-search"></a>
												<dl>
													<dt>
														<code class="variable">search</code> <code class="property">( <span class="optional">optional</span> string )</code>
													</dt>
													<dd>
														A general search string to match against any field stored for Stash item objects.
													</dd>
												</dl>
											</div>
											<div>
												<a name="property-queryInfo-url"></a>
												<dl>
													<dt>
														<code class="variable">url</code> <code class="property">( <span class="optional">optional</span> string )</code>
													</dt>
													<dd>
														Match Stash items against a <a href="http://developer.chrome.com/extensions/match_patterns.html">URL pattern</a>. Note that fragment identifiers are not matched.
													</dd>
												</dl>
											</div>
											<div>
												<a name="property-queryInfo-dateBefore"></a>
												<dl>
													<dt>
														<code class="variable">dateAddedBefore</code> <code class="property">( <span class="optional">optional</span> double )</code>
													</dt>
													<dd>
														Match Stash items if their <span class="variable">dateAdded</span> attribute is before or equal to the value provided in this attribute, in milliseconds since the epoch.
													</dd>
												</dl>
											</div>
											<div>
												<a name="property-queryInfo-dateBefore"></a>
												<dl>
													<dt>
														<code class="variable">dateAddedAfter</code> <code class="property">( <span class="optional">optional</span> double )</code>
													</dt>
													<dd>
														Match Stash items if their <span class="variable">dateAdded</span> attribute is after or equal to the value provided in this attribute, in milliseconds since the epoch.
													</dd>
												</dl>
											</div>
											<div>
												<a name="property-queryInfo-resultsLimit"></a>
												<dl>
													<dt>
														<code class="variable">resultsLimit</code> <code class="property">( <span class="optional">optional</span> integer )</code>
													</dt>
													<dd>
														The maximum number of Stash items to return.
													</dd>
												</dl>
											</div>
										</dd>
									</dl>
								</dd><!--<p>For example: </p><pre class="prettyprint"><code>opr.speeddial.update({ url: "http://dev.opera.com", title: "Dev Opera" });</code></pre><p></p>-->
								<dd>
									<div>
										<a name="property-get-callback" id="property-get-callback2"></a>
										<dl>
											<dt>
												<code class="variable">callback</code> <code class="property">( function )</code>
											</dt>
										</dl>
									</div>
								</dd>
							</dl>
						</div>
					</dd>
				</dl>
				<h4>
					Callback
				</h4>
				<p>
					The <em>callback</em> parameter should specify a function that looks like this:
				</p>
				<pre class="prettyprint">
	<code>function (array of <a href="stash.html#type-StashItem">StashItem</a> result) <span class="subdued">{...}</span>;</code>
	</pre>
				<dl>
					<dd>
						<div>
							<a name="property-callback-result" id="property-callback-result2"></a>
							<dl>
								<dt>
									<code class="variable">result</code> <code class="property">( array of <a href="stash.html#type-StashItem">StashItem</a> )</code>
								</dt>
							</dl>
						</div>
					</dd>
				</dl>
			</div>
		</div>
		<div>
			<h4 id="method-remove">
				remove
			</h4>
			<div class="summary lower">
				<code><span class="subdued">opr.stash.</span>remove(integer <code class="variable">stashId</code>, <span>function <code class="variable">callback</code></span>)</code>
			</div>
			<div class="description">
				<p>
					Removes the specified Stash item.
				</p>
				<h4>
					Parameters
				</h4>
				<dl>
					<dd>
						<div>
							<a name="property-get-stashId" id="property-get-stashId2"></a>
							<dl>
								<dt>
									<code class="variable">stashId</code> <code class="property">( integer )</code>
								</dt>
							</dl>
						</div>
						<div>
							<a name="property-get-callback" id="property-get-callback3"></a>
							<dl>
								<dt>
									<code class="variable">callback</code> <code class="property">( <span class="optional">optional</span> function )</code>
								</dt>
							</dl>
						</div>
					</dd>
				</dl>
				<h4>
					Callback
				</h4>
				<p>
					The <em>callback</em> parameter should specify a function that looks like this:
				</p>
				<pre class="prettyprint">
<code>function() {...};</code>
</pre>
				<dl>
					<dd>
						<div>
							<a name="property-callback-result" id="property-callback-result3"></a>
						</div>
					</dd>
				</dl>
			</div>
		</div>
		<h2 id="events">
			Events
		</h2>
		<div>
			<h4 id="event-onCreated">
				onCreated
			</h4>
			<div class="summary">
				<code><span class="subdued">opr.stash.</span>onCreated<span class="subdued">.addListener</span>(function(<span><a href="stash.html#type-StashItem">StashItem</a> <code class="variable">item</code></span>) <span class="subdued">{...}</span>);</code>
			</div>
			<div class="description">
				<p>
					Fired when a Stash item is created.
				</p>
				<h4>
					Listener Parameters
				</h4>
				<dl>
					<dd>
						<div>
							<a name="property-onCreated-item" id="property-onCreated-item"></a>
							<dl>
								<dt>
									<code class="variable">item</code> <code class="property">( <a href="stash.html#type-StashItem">StashItem</a> )</code>
								</dt>
								<dd>
									The Stash item that has been created.
								</dd>
							</dl>
						</div>
					</dd>
				</dl>
			</div>
		</div>
		<div>
			<h4 id="event-onRemoved">
				onRemoved
			</h4>
			<div class="summary">
				<code><span class="subdued">opr.stash.</span>onRemoved<span class="subdued">.addListener</span>(function(object <code class="variable">removeInfo</code>) <span class="subdued">{...}</span>);</code>
			</div>
			<div class="description">
				<p>
					Fired when a Stash item is removed.
				</p>
				<h4>
					Listener Parameters
				</h4>
				<div>
					<a name="property-onRemoved-stashId" id="property-onRemoved-stashId"></a>
					<dl>
						<dt>
							<code class="variable">removeInfo</code> <code class="property">( object )</code>
						</dt>
						<dd>
							<dl>
								<dd>
									<div>
										<a name="property-RemoveInfo-url"></a>
										<dl>
											<dt>
												<code class="variable">url</code> <code class="property">( string )</code>
											</dt>
											<dd>
												Url of the removed Stash item.
											</dd>
										</dl>
									</div>
								</dd>
							</dl>
						</dd>
					</dl>
				</div>
			</div>
		</div>
	</div>
</div>
  					</div><!-- .span8 -->
				<nav id="sidebar" class="span4 well well-small">
					<ul class="nav nav-list">
						<li>
							<h2 class="nav-header">Tutorials</h2>
							<ul class="nav nav-list">
								<li><a href="tut_getting_started.html">Getting started</a></li>
								<li><a href="tut_architecture_overview.html">Architecture overview</a></li>
								<li><a href="tut_basics.html">The basics of making an extension</a></li>
								<li><a href="tut_browser_actions.html">Buttons, popups and badges (browser actions)</a></li>
								<li><a href="tut_message_passing.html">Passing messages in extensions</a></li>
								<li><a href="tut_tab_window.html">Working with tabs and windows</a></li>
								<li><a href="tut_content_scripts.html">Content scripts</a></li>
								<li><a href="tut_match_patterns.html">Match patterns</a></li>
								<li><a href="declare_permissions.html">Permissons declarations</a></li>
								<li><a href="tut_optional_permissions.html">Optional permissions</a>
								<li><a href="tut_context_menus.html">Working with the context menu</a></li>
								<li><a href="tut_sd_extensions.html">Speed Dial extensions</a></li>
								<li><a href="tut_bookmarks.html">Working with bookmarks</a></li>
								<li><a href="tut_downloads.html">Working with downloads</a></li>
								<li><a href="tut_hist.html">Working with the browser history</a></li>
								<li><a href="tut_removing_browsingdata.html">Removing browsing data</a></li>
								<li><a href="tut_privacy.html">Controlling privacy features</a></li>
								<li><a href="tut_omnibox.html">Creating address bar extensions</a></li>
								<li><a href="tut_contentsettings.html">Site-specific customization</a></li>
								<li><a href="tut_commands.html">Adding keyboard shortcuts</a></li>
								<li><a href="tut_webnavigation.html">Using webNavigation</a></li>
								<li><a href="tut_proxy.html">Using the Proxy API</a></li>
								<li><a href="tut_offroad.html">Working with Off-Road Mode</a></li>
								<li><a href="tut_internationalization.html">Internationalization</a></li>
								<li><a href="devtools.html">Extending DevTools</a></li>
								<li><a href="tut_testing.html">Testing and debugging your extensions</a></li>
								<li><a href="tut_conversion.html">Converting OEX extensions to CRX/NEX</a></li>
								<li><a href="tut_icons.html">Creating effective icons</a></li>
								<li><a href="tut_extension_samples.html">Extension templates and samples</a></li>
								<li><a href="tut_publishing_guidelines.html">Publishing guidelines</a></li>
							</ul>
						</li>
						<li>
							<h2 class="nav-header">API Docs</h2>
							<ul class="nav nav-list">
								<li><a href="manifest.html">Formats: Manifest Files</a></li>
								<li><a href="alarms.html">chrome.alarms</a></li>
								<li><a href="bookmarks.html">chrome.bookmarks</a></li>
								<li><a href="browserAction.html">chrome.browserAction</a></li>
								<li><a href="browsingData.html">chrome.browsingData</a></li>
								<li><a href="commands.html">chrome.commands</a></li>
								<li><a href="contentSettings.html">chrome.contentSettings</a></li>
								<li><a href="contextMenus.html">chrome.contextMenus</a></li>
								<li><a href="cookies.html">chrome.cookies</a></li>
								<li><a href="devtools.inspectedWindow.html">chrome.devtools.inspectedWindow</a></li>
								<li><a href="devtools.network.html">chrome.devtools.network</a></li>
								<li><a href="devtools.panels.html">chrome.devtools.panels</a></li>
								<li><a href="downloads.html">chrome.downloads</a></li>								
								<li><a href="events.html">chrome.events</a></li>
								<li><a href="extension.html">chrome.extension</a></li>
								<li><a href="fontSettings.html">chrome.fontSettings</a></li>
								<li><a href="history.html">chrome.history</a></li>
								<li><a href="i18n.html">chrome.i18n</a></li>
								<li><a href="identity.html">chrome.identity</a></li>
								<li><a href="idle.html">chrome.idle</a></li>
								<li><a href="management.html">chrome.management</a></li>
								<li><a href="omnibox.html">chrome.omnibox</a></li>
								<li><a href="pageAction.html">chrome.pageAction</a></li>
								<li><a href="pageCapture.html">chrome.pageCapture</a></li>
								<li><a href="permissions.html">chrome.permissions</a></li>
								<li><a href="power.html">chrome.power</a></li>
								<li><a href="privacy.html">chrome.privacy</a></li>
								<li><a href="proxy.html">chrome.proxy</a></li>
								<li><a href="runtime.html">chrome.runtime</a></li>
								<li><a href="storage.html">chrome.storage</a></li>
								<li><a href="tabs.html">chrome.tabs</a></li>
								<li><a href="types.html">chrome.types</a></li>
								<li><a href="webNavigation.html">chrome.webNavigation</a></li>
								<li><a href="webRequest.html">chrome.webRequest</a></li>
								<li><a href="windows.html">chrome.windows</a></li>
								<li><a href="speeddial.html">opr.speeddial</a></li>
								<li><a href="stash.html">opr.stash</a></li>
							</ul>
						</li>
					</ul>
				</nav>
			</div><!-- .row-fluid -->
				<div id="push"></div><!-- this is for sticky footer: http://twitter.github.com/bootstrap/examples/sticky-footer-navbar.html -->
			</div><!-- /.container-fluid -->
		</div><!-- /#wrap -->
		<footer id="footer">
			
			<p>© 2013-2014 Opera Software. This article is licensed under a <a href="http://creativecommons.org/licenses/by/3.0/" rel="license">Creative Commons Attribution 3.0 Unported</a> license.</p>
			
		</footer>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
		<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
		<script src="js/prettify/run_prettify.js"></script>
		<script>
		 $(function(){
						var path = location.pathname.slice(location.pathname.lastIndexOf('/')+1);
						if ( path )
								$('#sidebar a[href="' + path + '"]').parent().attr('class', 'active');
								$('#navbar ul a[href$="' + path + '"]').parent().attr('class', 'active');
				});
			// see http://docs.jquery.com/Tutorials:Auto-Selecting_Navigation and Ola's fix
		</script>

		<script>
		  (function() {
		    var cx = '017162326639705525688:re0yffa7zqy';
		    var gcse = document.createElement('script');
		    gcse.type = 'text/javascript';
		    gcse.async = true;
		    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
		        '//www.google.com/cse/cse.js?cx=' + cx;
		    var s = document.getElementsByTagName('script')[0];
		    s.parentNode.insertBefore(gcse, s);
		  })();
		</script>

		<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-4118503-4']);
_gaq.push(['_gat._anonymizeIp']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
    </script>

	</body>
</html>	