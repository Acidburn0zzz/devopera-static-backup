<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Buttons, popups and badges (browser actions) - Opera 15+ extensions documentation</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
		<link href="http://netdna.bootstrapcdn.com/bootswatch/2.3.2/cosmo/bootstrap.min.css" rel="stylesheet">
		<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.1.1/css/bootstrap-responsive.min.css" rel="stylesheet">
		<link href="css/custom.css" rel="stylesheet" media="screen">
	</head>
	<body>
		<div id="wrap">
			<nav id="navbar" class="navbar navbar-fixed-top">
				<div class="navbar-inner">
					<div class="container-fluid">
						<button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</button>
						<a class="brand" href="index.html">Opera 15+ extensions documentation</a>
						<div class="nav-collapse collapse">
							<ul class="nav">
								<li><a href="contact.html">Contact</a></li>
								<li><a href="../index.html">&uarr; Dev.Opera</a></li>
							</ul>
							<form class="navbar-search pull-right" action="http://dev.opera.com/extension-docs/search.html">
							  <input name="q" type="text" class="search-query span3" placeholder="Search extension docs">
							</form>
						</div><!-- /.nav-collapse -->
					</div><!-- /.container-fluid -->
				</div><!-- /.navbar-inner -->
			</nav>
			<div class="container-fluid">
				<div class="row-fluid">
					<div class="span8">

						<h1>Buttons, popups and badges (browser actions)</h1>
					
					
					 
						<p class="badge pull-right">by <a href="https://github.com/shwetank/">Shwetank Dixit</a></p>
					
    <h2 id="introduction">Introduction</h2>

<p>In the <a href="tut_architecture_overview.html">architecture overview</a>, we covered the various UI elements that can be included in Opera extensions: these fall into two categories, <em>Page Actions</em> and <em>Browser Actions</em>.</p>

<p>In this article, we’ll get to see how to put these UI elements into action in an extension.</p>

<p>Getting to display any of these UI elements on the browser is extremely simple. All you need to do is enter the necessary details in the extension manifest, and make sure you have the appropriate functionality ready in the extension package (icon files, popup.html, background.js, etc).</p>

<h2 id="browser_actions">Browser Actions</h2>

<p><em>Browser actions</em> are used to put UI elements on the extensions toolbar. These UI elements can be a button (with or without a badge) or a popup. Use browser actions if you want the UI element to appear all the time.</p>

<p>However, if you don’t want the UI element to appear all the time, rather only wanting it to appear in specific pages, then it’s recommended to use <em>Page Actions</em>, which is explained later in the article. You cannot use both <em>Browser Actions</em> and <em>Page Actions</em> at the same time.</p>

<h3 id="buttons">Buttons</h3>

<p>To display a button in the browser UI, we simply mention it in the extension manifest like so:</p>
<pre class='prettyprint'>"browser_action": {
  "default_icon": "icon.png",
  "default_title": "My Sample Extension",    // optional; shown in tooltip
},</pre>
<p>Providing the default icon size in 19px or 38px size will allow the browser to automatically adjust the icon size according to the pixel density of the user’s display.</p>

<p>Putting this in the manifest will just display the button in the browser. Clicking it will not have an effect. However, with a button, you need it to perform a function once someone clicks on it.</p>

<p>To do that, you need to use add an event listener which listens to the click event, like so:</p>
<pre class='prettyprint'>chrome.browserAction.onClicked.addListener(function(){
  console.log('This button was clicked!');
});
</pre>
<p><a href="samples/BrowserActions-button.nex">Download our sample button extension</a> to see a very simple button example.</p>

<h3 id="popups">Popups</h3>

<p>To create a popup, you just need to make an HTML file (lets call it ‘popup.html’) which will be the web page displayed when the popup is opened. All you need to do is to mention this the extension manifest like so:</p>
<pre class='prettyprint'>"browser_action": {
  "default_icon": "icon.png",
  "default_title": "My Sample Extension",    // optional; shown in tooltip
  "default_popup": "popup.html"              
},</pre>
<p>Go ahead and <a href="samples/BrowserActions-Popup.nex">download our sample extension</a>, which has a very simple popup being displayed.</p>

<h3 id="badges">Badges</h3>

<p>Badges are small pieces of information located right next to a button. They often show supplementary information (for example, an extension for your email site might show the number of unread mails etc).</p>

<p>Badges are supposed to show a very small amount of information, so they are limited to 4 characters or less.</p>

<p>Lets see how to make a badge and set its text to update after a while.</p>

<p>Badges can be set using JavaScript in the background script (make sure to mention the background script in the extension manifest). There are two functions you need to be aware of :</p>

<p><code>chrome.browserAction.setBadgeBackgroundColor()</code>: This sets the background color of the badge</p>

<p><code>chrome.browserAction.setBadgeText()</code>: This sets the text of the badge</p>

<p>In our example, lets set the badge text as ‘Hey’ with a background color of red. In our background script, we will write:</p>
<pre class='prettyprint'>chrome.browserAction.setBadgeBackgroundColor({ color: "#ff0000" });
chrome.browserAction.setBadgeText({ text: "Hey" });</pre>
<p>Thats it! This is how you set a badge in your chrome extension. You can also specify an RGBa value instead of a hex value in case you want to add some translucency to the background. You can make it so that you update the badge after certain intervals of time, or after a certain action is performed.</p>

<h2 id="page_actions">Page Actions</h2>

<p>Page actions are used to put icons inside the address bar in order for them to perform an action. This action should be relevant to the current visible page, but not necessarily to all the pages open in the browser.</p>

<p>Just like Browser Actions, you can make buttons and popups for Page Actions too, in pretty much the same way. However, it is not possible to have badges for Page Actions.</p>

<h3 id="buttons_2">Buttons</h3>

<p>To get to display a button, simply mention it in the extension manifest like so:</p>
<pre class='prettyprint'>"page_action": {
  "default_icon": "icon.png",
  "default_title": "My Sample Extension",    // optional; shown in tooltip
},</pre>
<h3 id="popups_2">Popups</h3>

<p>To display a popup, you just need to make an HTML file (lets call it ‘popup.html’) which will be the web page displayed when the popup is opened. All you need to do is to mention this the extension manifest like so:</p>
<pre class='prettyprint'>"page_action": {
  "default_icon": "icon.png",
  "default_title": "My Sample Extension",    // optional; shown in tooltip
  "default_popup": "popup.html"              
},</pre>
<h2 id="displaying_a_page_action">Displaying a Page Action</h2>

<p>Page Actions are not displayed by default, unlike browser actions. You will need to explicitly show it using the <code>show()</code> function, and alternatively hide it using the <code>hide()</code> function.</p>

<p>For this, you will also need to know the Tab ID of the current visible tab. Thus the code to show or hide the Page Actions should reside in the background script. For example, to only show Page Actions in URLs on www.opera.com, we would do something like this in the background script:</p>
<pre class='prettyprint'>function checkURL(tabID, changeInfo, tab){
    if (tab.url.indexOf('www.opera.com')> -1){ // If it satisfies the criteria (the URL containing 'www.opera.com')
    chrome.pageAction.show(tabID); // shows the page action
  }
}

chrome.tabs.onUpdated.addListener(checkURL);</pre>
<p>Go ahead and <a href="samples/PageActions.nex">download the source for this extension</a>, to check out the code required for making it work.</p>
  					</div><!-- .span8 -->
				<nav id="sidebar" class="span4 well well-small">
					<ul class="nav nav-list">
						<li>
							<h2 class="nav-header">Tutorials</h2>
							<ul class="nav nav-list">
								<li><a href="tut_getting_started.html">Getting started</a></li>
								<li><a href="tut_architecture_overview.html">Architecture overview</a></li>
								<li><a href="tut_basics.html">The basics of making an extension</a></li>
								<li><a href="tut_browser_actions.html">Buttons, popups and badges (browser actions)</a></li>
								<li><a href="tut_message_passing.html">Passing messages in extensions</a></li>
								<li><a href="tut_tab_window.html">Working with tabs and windows</a></li>
								<li><a href="tut_content_scripts.html">Content scripts</a></li>
								<li><a href="tut_match_patterns.html">Match patterns</a></li>
								<li><a href="declare_permissions.html">Permissons declarations</a></li>
								<li><a href="tut_optional_permissions.html">Optional permissions</a>
								<li><a href="tut_context_menus.html">Working with the context menu</a></li>
								<li><a href="tut_sd_extensions.html">Speed Dial extensions</a></li>
								<li><a href="tut_bookmarks.html">Working with bookmarks</a></li>
								<li><a href="tut_downloads.html">Working with downloads</a></li>
								<li><a href="tut_hist.html">Working with the browser history</a></li>
								<li><a href="tut_removing_browsingdata.html">Removing browsing data</a></li>
								<li><a href="tut_privacy.html">Controlling privacy features</a></li>
								<li><a href="tut_omnibox.html">Creating address bar extensions</a></li>
								<li><a href="tut_contentsettings.html">Site-specific customization</a></li>
								<li><a href="tut_commands.html">Adding keyboard shortcuts</a></li>
								<li><a href="tut_webnavigation.html">Using webNavigation</a></li>
								<li><a href="tut_proxy.html">Using the Proxy API</a></li>
								<li><a href="tut_offroad.html">Working with Off-Road Mode</a></li>
								<li><a href="tut_internationalization.html">Internationalization</a></li>
								<li><a href="devtools.html">Extending DevTools</a></li>
								<li><a href="tut_testing.html">Testing and debugging your extensions</a></li>
								<li><a href="tut_conversion.html">Converting OEX extensions to CRX/NEX</a></li>
								<li><a href="tut_icons.html">Creating effective icons</a></li>
								<li><a href="tut_extension_samples.html">Extension templates and samples</a></li>
								<li><a href="tut_publishing_guidelines.html">Publishing guidelines</a></li>
							</ul>
						</li>
						<li>
							<h2 class="nav-header">API Docs</h2>
							<ul class="nav nav-list">
								<li><a href="manifest.html">Formats: Manifest Files</a></li>
								<li><a href="alarms.html">chrome.alarms</a></li>
								<li><a href="bookmarks.html">chrome.bookmarks</a></li>
								<li><a href="browserAction.html">chrome.browserAction</a></li>
								<li><a href="browsingData.html">chrome.browsingData</a></li>
								<li><a href="commands.html">chrome.commands</a></li>
								<li><a href="contentSettings.html">chrome.contentSettings</a></li>
								<li><a href="contextMenus.html">chrome.contextMenus</a></li>
								<li><a href="cookies.html">chrome.cookies</a></li>
								<li><a href="devtools.inspectedWindow.html">chrome.devtools.inspectedWindow</a></li>
								<li><a href="devtools.network.html">chrome.devtools.network</a></li>
								<li><a href="devtools.panels.html">chrome.devtools.panels</a></li>
								<li><a href="downloads.html">chrome.downloads</a></li>								
								<li><a href="events.html">chrome.events</a></li>
								<li><a href="extension.html">chrome.extension</a></li>
								<li><a href="fontSettings.html">chrome.fontSettings</a></li>
								<li><a href="history.html">chrome.history</a></li>
								<li><a href="i18n.html">chrome.i18n</a></li>
								<li><a href="identity.html">chrome.identity</a></li>
								<li><a href="idle.html">chrome.idle</a></li>
								<li><a href="management.html">chrome.management</a></li>
								<li><a href="omnibox.html">chrome.omnibox</a></li>
								<li><a href="pageAction.html">chrome.pageAction</a></li>
								<li><a href="pageCapture.html">chrome.pageCapture</a></li>
								<li><a href="permissions.html">chrome.permissions</a></li>
								<li><a href="power.html">chrome.power</a></li>
								<li><a href="privacy.html">chrome.privacy</a></li>
								<li><a href="proxy.html">chrome.proxy</a></li>
								<li><a href="runtime.html">chrome.runtime</a></li>
								<li><a href="storage.html">chrome.storage</a></li>
								<li><a href="tabs.html">chrome.tabs</a></li>
								<li><a href="types.html">chrome.types</a></li>
								<li><a href="webNavigation.html">chrome.webNavigation</a></li>
								<li><a href="webRequest.html">chrome.webRequest</a></li>
								<li><a href="windows.html">chrome.windows</a></li>
								<li><a href="speeddial.html">opr.speeddial</a></li>
								<li><a href="stash.html">opr.stash</a></li>
							</ul>
						</li>
					</ul>
				</nav>
			</div><!-- .row-fluid -->
				<div id="push"></div><!-- this is for sticky footer: http://twitter.github.com/bootstrap/examples/sticky-footer-navbar.html -->
			</div><!-- /.container-fluid -->
		</div><!-- /#wrap -->
		<footer id="footer">
			
			<p>© 2013-2014 Opera Software. This article is licensed under a <a href="http://creativecommons.org/licenses/by/3.0/" rel="license">Creative Commons Attribution 3.0 Unported</a> license.</p>
			
		</footer>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
		<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
		<script src="js/prettify/run_prettify.js"></script>
		<script>
		 $(function(){
						var path = location.pathname.slice(location.pathname.lastIndexOf('/')+1);
						if ( path )
								$('#sidebar a[href="' + path + '"]').parent().attr('class', 'active');
								$('#navbar ul a[href$="' + path + '"]').parent().attr('class', 'active');
				});
			// see http://docs.jquery.com/Tutorials:Auto-Selecting_Navigation and Ola's fix
		</script>

		<script>
		  (function() {
		    var cx = '017162326639705525688:re0yffa7zqy';
		    var gcse = document.createElement('script');
		    gcse.type = 'text/javascript';
		    gcse.async = true;
		    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
		        '//www.google.com/cse/cse.js?cx=' + cx;
		    var s = document.getElementsByTagName('script')[0];
		    s.parentNode.insertBefore(gcse, s);
		  })();
		</script>

		<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-4118503-4']);
_gaq.push(['_gat._anonymizeIp']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
    </script>

	</body>
</html>	